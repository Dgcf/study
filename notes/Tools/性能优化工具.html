<html>
<head>
  <title>性能优化工具</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/604043 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="938"/>
<h1>性能优化工具</h1>

<div>
<span><div><div><span style="font-size: 14.0pt; font-family: &quot;等线 Light&quot;; mso-bidi-font-family: &quot;Times New Roman&quot;; mso-font-kerning: 1.0pt; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">Gprof</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 等线; mso-fareast-font-family: 宋体;-en-paragraph:true;">Gprof</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">是</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 等线; mso-fareast-font-family: 宋体;-en-paragraph:true;">GUN</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">编译器工具包提供的性能分析工具，</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 等线; mso-fareast-font-family: 宋体;-en-paragraph:true;">gprof</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">能够给出函数调用关系、调用次数、执行时间等信息。大多数</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 等线; mso-fareast-font-family: 宋体;-en-paragraph:true;">Linux</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">发行版默认都按照了</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 等线; mso-fareast-font-family: 宋体;-en-paragraph:true;">gprof</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">。</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">但是</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 等线; mso-fareast-font-family: 宋体;-en-paragraph:true;">gprof</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">在编译和链接阶段都需要添加</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 等线; mso-fareast-font-family: 宋体;-en-paragraph:true;">-pg</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">选项（</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 等线; mso-fareast-font-family: 宋体;-en-paragraph:true;">pg</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">表示产生的程序可以使用</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 等线; mso-fareast-font-family: 宋体;-en-paragraph:true;">gprof</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">分析），为</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 等线; mso-fareast-font-family: 宋体;-en-paragraph:true;">GCC</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">内嵌的功能，会自动在程序中插入一些代码以保存函数执行时的一些信息（执行时间、执行次数、调用关系等）。然后在正常运行时</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 等线; mso-fareast-font-family: 宋体;-en-paragraph:true;">,</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">程序会自动将获得的程序执行时信息输出到</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 等线; mso-fareast-font-family: 宋体;-en-paragraph:true;">gmon.out</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">文件中，再应用</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 等线; mso-fareast-font-family: 宋体;-en-paragraph:true;">gprof</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">命令处理程序和其输出的</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 等线; mso-fareast-font-family: 宋体;-en-paragraph:true;">gmon.out</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">文件，便会输出人工阅读的信息。</span></div><div><span style="font-size: 10.5pt; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线; mso-bidi-font-family: &quot;Times New Roman&quot;; mso-font-kerning: 1.0pt; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">由于</span><span style="font-size: 10.5pt; font-family: 等线; mso-fareast-font-family: 宋体; mso-bidi-font-family: &quot;Times New Roman&quot;; mso-font-kerning: 1.0pt; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">gprof</span><span style="font-size: 10.5pt; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线; mso-bidi-font-family: &quot;Times New Roman&quot;; mso-font-kerning: 1.0pt; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">需要添加编译选项，同时对于多线程支持不好</span></div><div><span style="font-size: 10.5pt; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线; mso-bidi-font-family: &quot;Times New Roman&quot;; mso-font-kerning: 1.0pt; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;"><br/></span></div><div><span style="font-size: 12.0pt; mso-bidi-font-size: 10.0pt; font-family: 宋体; mso-bidi-font-family: &quot;Times New Roman&quot;; mso-font-kerning: 1.0pt; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">Intel VTune</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 等线; mso-fareast-font-family: 宋体;-en-paragraph:true;">VTune</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">是</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 等线; mso-fareast-font-family: 宋体;-en-paragraph:true;">Intel</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">提供的用于分析和优化程序性能的工具，它能够帮助你确定程序的热点，帮助你找到导致性能不理想的原因，从而优化你的程序。</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">主要包括三个小工具：</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">（</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 等线; mso-fareast-font-family: 宋体;-en-paragraph:true;">1</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">）</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 等线; mso-fareast-font-family: 宋体;-en-paragraph:true;">Performance Analyzer</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">：性能分析，找到软件性能比较热的部分，一般也就是性能瓶颈的关键点。</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">（</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 等线; mso-fareast-font-family: 宋体;-en-paragraph:true;">2</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">）</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 等线; mso-fareast-font-family: 宋体;-en-paragraph:true;">Intel Threading Checker</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">：用于查找线程错误</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 等线; mso-fareast-font-family: 宋体;-en-paragraph:true;">,</span> <span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">能够检测资源竞争、线程死锁等问题。</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">（</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 等线; mso-fareast-font-family: 宋体;-en-paragraph:true;">3</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">）</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 等线; mso-fareast-font-family: 宋体;-en-paragraph:true;">Intel Threading Profiler</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">：线程性能检测工具</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 等线; mso-fareast-font-family: 宋体;-en-paragraph:true;">,</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">多线程可能存在负载比平衡</span><span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 等线; mso-fareast-font-family: 宋体;-en-paragraph:true;">,</span> <span style="mso-bidi-font-size: 10.5pt; line-height: 150%; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线;-en-paragraph:true;">同步开销过大等线程相关的性能问题，该工具可以帮你发现每一个线程每一时刻的状态。</span></div><div><span style="font-size: 10.5pt; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线; mso-bidi-font-family: &quot;Times New Roman&quot;; mso-font-kerning: 1.0pt; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">但是</span><span style="font-size: 10.5pt; font-family: 等线; mso-fareast-font-family: 宋体; mso-bidi-font-family: &quot;Times New Roman&quot;; mso-font-kerning: 1.0pt; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">Intel VTune</span><span style="font-size: 10.5pt; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线; mso-bidi-font-family: &quot;Times New Roman&quot;; mso-font-kerning: 1.0pt; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">需要收费，这里推荐土豪可以使用。</span></div><div><span style="font-size: 10.5pt; font-family: 宋体; mso-ascii-font-family: 等线; mso-hansi-font-family: 等线; mso-bidi-font-family: &quot;Times New Roman&quot;; mso-font-kerning: 1.0pt; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;"><br/></span></div><div><span style="font-size: 12.0pt; mso-bidi-font-size: 10.0pt; font-family: 宋体; mso-bidi-font-family: &quot;Times New Roman&quot;; mso-font-kerning: 1.0pt; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">Perf</span></div><div style="margin: 0mm; text-indent: 7mm; padding-top: 0mm; padding-bottom: 0mm; line-height: 150%; text-align: justify;"><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">perf</span><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">是</span><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">Linux</span><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">内核</span> <span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">2.6.31</span><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">之后支持的、用户空间的（</span><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">Linux</span> <span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">内核分用户空间和内核空间，用户只能访问用户空间的数据、工具）、基于命令行的性能分析工具。</span><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">perf</span> <span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">提供了一系列子命令。</span><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">perf</span> <span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">能够统计剖分整个</span><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">Linux</span><a href="http://www.2cto.com/os/%20/t%20_blank" style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">系统</a><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">。</span></div><div style="margin: 0mm; text-indent: 7mm; padding-top: 0mm; padding-bottom: 0mm; line-height: 150%; text-align: justify;"><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">perf</span> <span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">支持硬件和软件计数器，并且能够像</span> <span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">strace</span> <span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">一样跟踪内核调用。从</span> <span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">Linux</span> <span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">内核</span> <span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">3.14</span> <span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">开始，</span><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">perf</span> <span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">还支持功耗剖分。</span></div><div style="margin: 0mm; text-indent: 7mm; padding-top: 0mm; padding-bottom: 0mm; line-height: 150%; text-align: justify;"><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">perf</span> <span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">支持下列子命令：</span></div><ul style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt; list-style-type: disc;"><li style="margin-left: 36pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-size: 10.5pt; color: #010101;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: #010101; font-size: 10.5pt; font-decoration: Normal;">stat</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">：此命令为常见性能事件提供整体数据，包括执行步骤和消耗所用的时间周期。</span></div></li><li style="margin-left: 36pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-size: 10.5pt; color: #010101;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: #010101; font-size: 10.5pt; font-decoration: Normal;">top</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">：此命令执行与</span> <span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">top</span> <span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">工具相似的功能。它实时生成并显示性能计数器配置文件。</span></div></li><li style="margin-left: 36pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-size: 10.5pt; color: #010101;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: #010101; font-size: 10.5pt; font-decoration: Normal;">record</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">：此命令将性能数据记录到随后可使用</span> <span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">perf report</span> <span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">分析的文件中。</span></div></li><li style="margin-left: 36pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-size: 10.5pt; color: #010101;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: #010101; font-size: 10.5pt; font-decoration: Normal;">report</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">：此命令从文件中读取性能数据并分析记录数据</span></div></li><li style="margin-left: 36pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-size: 10.5pt; color: #010101;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: #010101; font-size: 10.5pt; font-decoration: Normal;">list</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">：此命令列出特定机器上有效事件。这些事件因系统性能监控硬件和软件配置而异。</span></div></li></ul><div style="line-height: 150%; text-align: justify;"><span style="font-size: 12.0pt; mso-bidi-font-size: 10.0pt; font-family: 宋体; mso-bidi-font-family: &quot;Times New Roman&quot;; mso-font-kerning: 1.0pt; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;"><br/></span></div><div style="line-height: 150%; text-align: justify;"><span style="font-size: 12.0pt; mso-bidi-font-size: 10.0pt; font-family: 宋体; mso-bidi-font-family: &quot;Times New Roman&quot;; mso-font-kerning: 1.0pt; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">OProfile</span><span style="font-family: 宋体;"><br/></span></div><div style="margin: 0mm; text-indent: 7mm; padding-top: 0mm; padding-bottom: 0mm; line-height: 150%; text-align: justify;"><div><span style="font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">OProfile</span> <span style="font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">是一个全系统性能监控工具。它使用处理器的专业性能监控硬件来检索关于内核和系统可执行文件的信息，以便确定某些事件的频率，比如引用内存时，就接收第二级缓存请求数和硬件请求数。</span><span style="font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">OProfile</span> <span style="font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">也可用于确定处理器的使用率，并确定最常使用的应用程序和服务。</span></div><div><span style="font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">   </span> <span style="font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">但</span> <span style="font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">OProfile</span> <span style="font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">有一些局限性：</span></div></div><ul style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt; list-style-type: disc; text-align: justify;"><li style="margin-left: 36pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-size: 10.5pt; color: #010101;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: #010101; font-size: 10.5pt; font-decoration: Normal;">性能监控样本可能不太准确。由于处理器可能无法执行指令，样本就会记录一个附近的指令，而不是记录触发中断的指令。</span></div></li><li style="margin-left: 36pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-size: 10.5pt; color: #010101;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: #010101; font-size: 10.5pt; font-decoration: Normal;">OProfile</span> <span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">希望程序多次启动和停止。这样的话多次运行得到的样本就可以累积，用户可能需要清除上一次运行的样本数据。</span></div></li><li style="margin-left: 36pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-size: 10.5pt; color: #010101;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: #010101; font-size: 10.5pt; font-decoration: Normal;">OProfile</span> <span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">集中识别</span> <span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">CPU</span> <span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">访问限制的进程问题。因此，对于等待锁定其他事件来识别睡眠状态的进程并无帮助。</span></div></li></ul><div style="line-height: 150%; text-align: justify;"><br/></div><div style="line-height: 150%; text-align: justify;"><span style="font-size: 14.0pt; font-family: &quot;等线 Light&quot;; mso-fareast-font-family: 宋体; mso-bidi-font-family: &quot;Times New Roman&quot;; mso-font-kerning: 1.0pt; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA;">Cachegrind</span><br/></div><p style="margin: 0mm; text-indent: 7mm; padding-top: 0mm; padding-bottom: 0mm; line-height: 19pt; min-height: 19pt; text-align: justify;"></p><div style="text-align: justify;"><span style="font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">Valgrind是一套</span><a href="http://lib.csdn.net/base/linux%20/t%20_blank%20/o%20Linux%D6%AA%CA%B6%BF%E2" style="font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">Linux</a><span style="font-family: 等线; color: rgb(1, 1, 1); font-size: 10.5pt;">下，开放源代码（GPL V2）的仿真调试工具的集合。Valgrind由内核（core）以及基于内核的其他调试工具组成。内核类似于一个框架（framework），它模拟了一个CPU环境，并提供服务给其他工具；而其他工具则类似于插件 (plug-in)，利用内核提供的服务完成各种特定的内存调试任务。Valgrind的体系结构如下图所示：</span></div><div style="margin-top: 1em; margin-bottom: 1em; text-align: justify;"><a href="http://www.ibm.com/developerworks/cn/linux/l-cn-valgrind/images/image001.jpg%20/t%20_blank"><img src="性能优化工具_files/Image.jpg" type="image/jpeg" data-filename="Image.jpg" width="517"/></a><span style="font-family: Arial; color: rgb(51, 51, 51); font-size: 13.5pt;-en-paragraph:true;"> </span></div><p style="text-align: justify;"></p><div style="margin: 0mm; text-indent: 7mm; padding-top: 0mm; padding-bottom: 0mm; line-height: 150%; text-align: justify;"><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">Valgrind</span><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">包括如下一些工具：</span></div><ul style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt; list-style-type: disc; text-align: justify;"><li style="margin-left: 36pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-size: 10.5pt; color: #010101;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: #010101; font-size: 10.5pt; font-decoration: Normal; font-weight: bold;">Memcheck</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">：这是</span><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">valgrind</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">应用最广泛的工具，一个重量级的内存检查器，能够发现开发中绝大多数内存错误使用情况，比如：使用未初始化的内存，使用已经释放了的内存，内存访问越界等。这也是本文将重点介绍的部分。</span></div></li><li style="margin-left: 36pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-size: 10.5pt; color: #010101;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: #010101; font-size: 10.5pt; font-decoration: Normal; font-weight: bold;">Callgrind</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">：它主要用来检查程序中函数调用过程中出现的问题。</span></div></li><li style="margin-left: 36pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-size: 10.5pt; color: #010101;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: #010101; font-size: 10.5pt; font-decoration: Normal; font-weight: bold;">Cachegrind</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">：它主要用来检查程序中缓存使用出现的问题。</span></div></li><li style="margin-left: 36pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-size: 10.5pt; color: #010101;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: #010101; font-size: 10.5pt; font-decoration: Normal; font-weight: bold;">Helgrind</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">：它主要用来检查多线程程序中出现的竞争问题。</span></div></li><li style="margin-left: 36pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-size: 10.5pt; color: #010101;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: #010101; font-size: 10.5pt; font-decoration: Normal; font-weight: bold;">Massif</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">：它主要用来检查程序中堆栈使用中出现的问题。</span></div></li><li style="margin-left: 36pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-size: 10.5pt; color: #010101;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: #010101; font-size: 10.5pt; font-decoration: Normal; font-weight: bold;">Extension</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">：可以利用</span><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">core</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">提供的功能，自己编写特定的内存调试工具。</span></div></li></ul><div style="margin: 0mm; text-indent: 7mm; padding-top: 0mm; padding-bottom: 0mm; line-height: 150%; text-align: justify;"><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">很多人可能仅仅是使用了</span><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">Valgrind</span><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">的</span><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">memcheck</span><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">功能，用于内存泄露问题查找。这里推荐一下</span><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">massif</span><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">，它也能够解决内存问题。当然这里重点推荐使用</span><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">Callgrind</span><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">工具，因为</span><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">Callgrind</span><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">工具帮助</span><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">UFT2.0</span><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">平台找到了代码的热点。</span></div><div style="margin: 0mm; text-indent: 7mm; padding-top: 0mm; padding-bottom: 0mm; line-height: 150%; text-align: justify;"><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">Cachegrind</span><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">这个工具可以提供详尽的</span><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">profiling</span><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">信息。它不光对指令、内存访问进行计数，更能针对每条指令、每行源代码、每个函数和每个程序统计</span><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">cache</span><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">的不命中次数。</span></div><div style="margin: 0mm; text-indent: 7mm; padding-top: 0mm; padding-bottom: 0mm; line-height: 150%; text-align: justify;"><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">要使用这个工具必须使用参数</span><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">-tool=cachegrind</span><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">。它同时有两个输出，一个是前端的统计信息和一个日志文件信息。文件名为</span><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">cachegrind.out.PID</span><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">。</span></div><h3 style="text-align: justify;"><span style="font-family: ����; color: rgb(1, 1, 1); font-size: 12.0pt; font-weight: bold;">4.1.6</span> <span style="font-family: 宋体; color: rgb(1, 1, 1); font-size: 14.0pt; font-weight: bold;">其它工具</span></h3><div style="margin: 0mm; text-indent: 7mm; padding-top: 0mm; padding-bottom: 0mm; line-height: 150%; text-align: justify;"><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">还有</span><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">SystemTap</span><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">、</span><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">DTrace</span><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">等性能工具，这里就不一一描述。</span></div><div style="margin: 0mm; text-indent: 7mm; padding-top: 0mm; padding-bottom: 0mm; line-height: 150%; text-align: justify;"><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">上面的性能工具对于查找串行编程中代码热点都有一定的效果。但是，对于并行编程中，如何查找影响程序并发量的问题，上面的工具其实不是太理想，由于没有成功案例，我这边还在研究，就不详细说明。不过通过与国内高性能计算的专家的交流，这里推荐</span><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">vampire</span><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">和</span><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">vampireTrace</span><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">工具。</span></div><h2 style="text-align: justify;"><span style="font-family: ����; color: rgb(1, 1, 1); font-size: 12.0pt; font-weight: bold;">4.2</span> <span style="font-family: &quot;���� Light&quot;; color: rgb(1, 1, 1); font-size: 14.0pt; font-weight: bold;">Cachegrind</span><span style="font-family: 黑体; color: rgb(1, 1, 1); font-size: 14.0pt; font-weight: bold;">使用说明</span></h2><div style="margin: 0mm; text-indent: 7mm; padding-top: 0mm; padding-bottom: 0mm; line-height: 150%; text-align: justify;"><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">Cachegrind</span><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">工具的使用是通过命令：</span><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">valgrind -tool=name</span> <span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">程序名来调用的，如果不指定</span><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">tool</span><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">参数时默认是</span><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">memcheck</span><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">。</span></div><div style="margin: 0mm; text-indent: 7mm; padding-top: 0mm; padding-bottom: 0mm; line-height: 150%; text-align: justify;"><span style="text-indent: 7mm; line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">命令格式：</span><span style="text-indent: 7mm; line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">valgrind [valgrind-options] your-prog [your-prog options]</span></div><div style="line-height: 150%; text-align: justify;"><table style="border-collapse: collapse; min-width: 100%;" width="603"><colgroup><col style="width: 200px;"></col><col style="width: 403px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(1, 1, 1); width: 200px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">--tool=</span></div></td><td style="border: 1px solid rgb(1, 1, 1); width: 403px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">&lt;toolname&gt;</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">，运行</span><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">valgrind</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">中名为</span><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">toolname</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">的工具</span></div></td></tr><tr><td style="border: 1px solid rgb(1, 1, 1); width: 200px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">--trace-children=</span></div></td><td style="border: 1px solid rgb(1, 1, 1); width: 403px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">no|yes</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">，是否跟踪子线程</span></div></td></tr><tr><td style="border: 1px solid rgb(1, 1, 1); width: 200px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">--child-silent-after-fork=</span></div></td><td style="border: 1px solid rgb(1, 1, 1); width: 403px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">no|yes</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">，建议与</span><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">trace-children</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">一起使用，不打印子进程信息</span></div></td></tr><tr><td style="border: 1px solid rgb(1, 1, 1); width: 200px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">--separate-threads=</span></div></td><td style="border: 1px solid rgb(1, 1, 1); width: 403px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">no|yes</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">，为每个线程单独生成一个性能分析文件</span></div></td></tr><tr><td style="border: 1px solid rgb(1, 1, 1); width: 200px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">--time-stamp=</span></div></td><td style="border: 1px solid rgb(1, 1, 1); width: 403px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">no|yes</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">，是否增加时间戳到</span><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">log</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">信息</span></div></td></tr><tr><td style="border: 1px solid rgb(1, 1, 1); width: 200px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">-log-fd=</span></div></td><td style="border: 1px solid rgb(1, 1, 1); width: 403px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">&lt;number&gt;</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">，输出</span><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">log</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">到描述符文件</span></div></td></tr><tr><td style="border: 1px solid rgb(1, 1, 1); width: 200px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">-log-file=</span></div></td><td style="border: 1px solid rgb(1, 1, 1); width: 403px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">&lt;file&gt;</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">，将输出的信息写入到文件内</span></div></td></tr><tr><td style="border: 1px solid rgb(1, 1, 1); width: 200px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">-log-file-exactly=</span></div></td><td style="border: 1px solid rgb(1, 1, 1); width: 403px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">&lt;file&gt;</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">，输出</span><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">log</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">信息到文件内</span></div></td></tr><tr><td style="border: 1px solid rgb(1, 1, 1); width: 200px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">-log-file-qualifier=</span></div></td><td style="border: 1px solid rgb(1, 1, 1); width: 403px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">&lt;VAR&gt;</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">，得环境变量的值来做为输出信息的文件名。</span> <span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">[none]</span></div></td></tr><tr><td style="border: 1px solid rgb(1, 1, 1); width: 200px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">-log-socket=</span></div></td><td style="border: 1px solid rgb(1, 1, 1); width: 403px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">ipaddr:port</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">，输出</span><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">log</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">到</span><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">socket</span> <span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">，</span><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">ipaddr:port</span></div></td></tr><tr><td style="border: 1px solid rgb(1, 1, 1); width: 200px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">-xml=</span></div></td><td style="border: 1px solid rgb(1, 1, 1); width: 403px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">no|yes</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">，是否将信息以</span><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">xml</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">格式输出，只有</span><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">memcheck</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">可用</span></div></td></tr><tr><td style="border: 1px solid rgb(1, 1, 1); width: 200px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">-num-callers=</span></div></td><td style="border: 1px solid rgb(1, 1, 1); width: 403px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">&lt;number&gt;</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">，</span><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">show &lt;number&gt; callers in stack traces [12]</span></div></td></tr><tr><td style="border: 1px solid rgb(1, 1, 1); width: 200px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">-error-limit=</span></div></td><td style="border: 1px solid rgb(1, 1, 1); width: 403px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">no|yes</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">，如果太多错误，则停止显示新错误</span><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">?[yes]</span></div></td></tr><tr><td style="border: 1px solid rgb(1, 1, 1); width: 200px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">-error-exitcode=</span></div></td><td style="border: 1px solid rgb(1, 1, 1); width: 403px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">&lt;number&gt;</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">，如果发现错误则返回错误代码</span> <span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">[0=disable]</span></div></td></tr><tr><td style="border: 1px solid rgb(1, 1, 1); width: 200px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">-db-attach=</span></div></td><td style="border: 1px solid rgb(1, 1, 1); width: 403px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">no|yes</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">，当出现错误时自动启动调试器</span><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">gdb</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">。</span><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">[no]</span></div></td></tr><tr><td style="border: 1px solid rgb(1, 1, 1); width: 200px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">-db-command=</span></div></td><td style="border: 1px solid rgb(1, 1, 1); width: 403px; padding: 8px;"><div style="line-height: 150%; text-align: justify;"><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">&lt;command&gt;</span><span style="line-height: 150%; font-family: 宋体; color: rgb(1, 1, 1); font-size: 10.5pt;">，启动调试器的命令行选项</span><span style="line-height: 150%; font-family: ����; color: rgb(1, 1, 1); font-size: 10.5pt;">[gdb -nw %f %p]</span></div></td></tr></tbody></table><br/></div></div></span>
</div></body></html> 