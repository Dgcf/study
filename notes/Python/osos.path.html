<html>
<head>
  <title>os/os.path</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/604043 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="554"/>
<h1>os/os.path</h1>

<div>
<span><div><div><span style="font-size: 11pt; font-family: Georgia;">os模块中有很多unix/linux独有的相关操作，没有做记录，重点关注windows下的</span></div><div><span style="font-size: 11pt; font-family: Georgia;">文件和目录操作：</span></div><ul><li><div><span style="font-size: 11pt; font-family: Georgia;">os.mkdir(</span><span style="font-size: 11pt; font-family: Georgia; font-style: italic;">path</span><span style="font-size: 11pt; font-family: Georgia;">,</span> <span style="font-size: 11pt; font-family: Georgia; font-style: italic;">mode=0o777</span><span style="font-size: 11pt; font-family: Georgia;">,</span> <span style="font-size: 11pt; font-family: Georgia; font-style: italic;">*</span><span style="font-size: 11pt; font-family: Georgia;">,</span> <span style="font-size: 11pt; font-family: Georgia; font-style: italic;">dir_fd=None</span><span style="font-size: 11pt; font-family: Georgia;">)：建立文件夹，如果上一层目录不存在建立不成功</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">os.makedirs(</span><span style="font-size: 11pt; font-family: Georgia; font-style: italic;">name</span><span style="font-size: 11pt; font-family: Georgia;">,</span> <span style="font-size: 11pt; font-family: Georgia; font-style: italic;">mode=0o777</span><span style="font-size: 11pt; font-family: Georgia;">,</span> <span style="font-size: 11pt; font-family: Georgia; font-style: italic;">exist_ok=False</span><span style="font-size: 11pt; font-family: Georgia;">)：递归建立，不存在的目录也会建起来</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">os.listdir():</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">os.unlink(</span><span style="font-size: 11pt; font-family: Georgia; font-style: italic;">path</span><span style="font-size: 11pt; font-family: Georgia;">,</span> <span style="font-size: 11pt; font-family: Georgia; font-style: italic;">*</span><span style="font-size: 11pt; font-family: Georgia;">,</span> <span style="font-size: 11pt; font-family: Georgia; font-style: italic;">dir_fd=None</span><span style="font-size: 11pt; font-family: Georgia;">)：删除path指定的路径的文件</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">os.remove(</span><span style="font-size: 11pt; font-family: Georgia; font-style: italic;">path</span><span style="font-size: 11pt; font-family: Georgia;">,</span> <span style="font-size: 11pt; font-family: Georgia; font-style: italic;">*</span><span style="font-size: 11pt; font-family: Georgia;">,</span> <span style="font-size: 11pt; font-family: Georgia; font-style: italic;">dir_fd=None</span><span style="font-size: 11pt; font-family: Georgia;">)：删除path指定路径的文件，如果是目录会抛出OSError异常。和unlink貌似没有区别</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">os.rmdir(</span><span style="font-size: 11pt; font-family: Georgia; font-style: italic;">path</span><span style="font-size: 11pt; font-family: Georgia;">,</span> <span style="font-size: 11pt; font-family: Georgia; font-style: italic;">*</span><span style="font-size: 11pt; font-family: Georgia;">,</span> <span style="font-size: 11pt; font-family: Georgia; font-style: italic;">dir_fd=None</span><span style="font-size: 11pt; font-family: Georgia;">)：删除目录，仅仅在该目录下为空时有效，想删除目录树，需用到</span><span style="font-size: 11pt; font-family: Georgia; text-decoration: underline;">shutil.</span><span style="font-size: 11pt; font-family: Georgia; text-decoration: underline;">rmtree</span><span style="font-size: 11pt; font-family: Georgia; text-decoration: underline;">(</span><span style="font-size: 11pt; font-family: Georgia; font-style: italic; text-decoration: underline;">path</span><span style="font-size: 11pt; font-family: Georgia; text-decoration: underline;">,</span> <span style="font-size: 11pt; font-family: Georgia; font-style: italic; text-decoration: underline;">ignore_errors=False</span><span style="font-size: 11pt; font-family: Georgia; text-decoration: underline;">,</span> <span style="font-size: 11pt; font-family: Georgia; font-style: italic; text-decoration: underline;">onerror=None</span><span style="font-size: 11pt; font-family: Georgia; text-decoration: underline;">)</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">os.removedirs(name):</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">os.rename(src, dst, *, src_dir_fd=None, dst_dir_fd=None): 将src的名字修改为dst，可以修改文件和文件夹，但如果dst存在会抛出异常</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">os.renames(old, new):</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">os.replace()</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">os.chdir(path)：改变路径为path指定的</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">os.getcwd():返回当前路径</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">os.get_terminal_size(fd=STDOUT_FILENO): (pycharm里提示有参数*args和**kwargs</span><span style="font-family: Georgia; font-size: 11pt;">),可选参数fd默认值为STDOUT_FILENO或标准输出，指定了需要获取哪个</span><span style="font-family: Georgia; font-size: 11pt; font-weight: bold; color: #ff0000;">文件描述符(文件描述符具体指哪些？)</span><span style="font-family: Georgia; font-size: 11pt;">。</span></div></li></ul><ul><li><div><span style="font-size: 11pt; font-family: Georgia;">返回值为terminal_size类型的元组，(columns, lines)，可以通过os.get_terminal_size().columns和lines访问</span></div></li></ul><ul><li><div><span style="font-size: 11pt; font-family: Georgia;">os.walk(top, topdown=True, onerror=None, followlinks=False): 遍历目录,返回的是一个生成器，由三个元素(dirpath, dirnames, filenames)组成的元组组成,其中：</span></div></li></ul><ul><li><div><span style="font-size: 11pt; font-family: Georgia;">返回值的迭代器由：</span></div></li></ul><ul><li><div><span style="font-size: 11pt; font-family: Georgia;">dirpath：是一个字符串，表示目录</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">dirnames：是该目录下的子目录名组成的列表</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">filenames：是该目录下由非目录的文件组成的列表</span></div></li></ul><ul><li><div><span style="font-size: 11pt; font-family: Georgia;">入参：暂时不清楚</span></div></li></ul><div><span style="font-size: 11pt; font-family: Georgia;">进程相关：</span></div><ul><li><div><span style="font-size: 11pt; font-family: Georgia;">exec*系列方法：执行的时候使用的是当前进程，不会为括号中执行的程序重新分配进程，不返回执行结果</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;"> 方法：</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">execl(path, arg0, arg1, ...)/execle(path, arg0, arg1, ..., env)/execlp(file, arg0, arg1,...)/execlpe(file, arg0,arg1,...,env)</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">execv(path, args)/execve(path, args, env)/execvp(file, args)/execvpe(file, args, env)</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">用法如下：</span></div></li><li><div><span style="box-sizing: border-box; outline: 0px; word-break: break-all; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 11pt; color: #4f4f4f; font-family: Georgia; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 26px;">execv*系列的函数表示其接受的参数是以一个list或者是一个tuple表示的参数表</span></span></div></li><li><div><span style="font-size: 11pt;"><span style="text-align: justify; font-size: 11pt; color: #4f4f4f; font-family: Georgia;">execl*系列的函数表示其接受的参数是一个个独立的参数传递进去的。</span></span></div></li><li><div><span style="font-size: 11pt;"><span style="text-align: justify; font-size: 11pt; color: #4f4f4f; font-family: Georgia;">exec*p*系列函数表示在执行参数传递过去的命令时使用PATH环境变量来查找命令</span></span></div></li><li><div><span style="font-size: 11pt;"><span style="text-align: justify; font-size: 11pt; color: #4f4f4f; font-family: Georgia;">exec*e系列函数表示在执行命令的时候读取该参数指定的环境变量作为默认的环境配置，最后的env参数必须是一个mapping对象，可以是一个dict类型的对象。</span></span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">使用心得：</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">如果是运行脚本如py脚本，第一个参数并不是脚本名称，而是python的解释器！</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">第一个参数path是指包含执行程序文件名的全路径！第二个参数是可执行文件名，如果运行脚本，前两个参数都不是脚本名！</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">如果运行的是py脚本一般用带p的方法比较好，如果在环境变量中不需要自己指定python解释器的路径，否则要全路径</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">_exit(n):文档中说标准的退出是sys.exit(n), 这个方法只用于fork()之后，具体未知</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">startfile(path[, operation]): </span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">如果operation没有指定或指定为'open', 相当于是双击文件，所以类似文本文件会直接打开，脚本会直接运行</span></div></li><li><div><span style="font-size: 11pt; color: #ff0000; font-family: Georgia;">其他参数还可以有哪些？</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">注意事项：</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">path最好是绝对路径，相对路径经尝试是不行的</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">system(command): 调用标准C函数system，在子shell中执行命令command</span></div></li></ul><div><span style="font-size: 11pt; font-family: Georgia;">路径：</span></div><div><span style="font-size: 11pt; font-family: Georgia;">os.path.join(path, *paths)：</span></div><div><span style="font-size: 11pt; font-family: Georgia;">os.path.dirname(path):给出path路径，返回文件的目录</span></div><div><span style="font-size: 11pt; font-family: Georgia;">os.path.basename(path): 去掉目录路径返回文件名，不管目录是绝对路径还是相对路径</span></div><div><span style="font-size: 11pt; font-family: Georgia;">os.path.commonpath(paths): paths是一个路径组成的序列，返回序列路径中相同的部分</span></div><div><span style="font-size: 11pt; font-family: Georgia;">os.path.commonprefix(list):</span></div><div><span style="font-size: 11pt; font-family: Georgia;">os.path.exists(): 检测文件是否存在，可以是文件和文件夹，返回值为True或False</span></div><div><span style="font-size: 11pt; font-family: Georgia;">os.path.lexists(path): </span></div><div><span style="font-size: 11pt; font-family: Georgia;">os.path.abspath(): 返回规范化的绝对路径</span></div><ul><li><div><span style="font-size: 11pt; font-family: Georgia;">如果说path只是一个文件名，如'1.txt', 这个方法相当于join(os.getcwd(), path)，将当前目录和path组成一个完整的路径</span></div></li><li><div><span style="font-size: 11pt; font-family: Georgia;">如果前面有盘符如’C:/',直接返回，但是如果不是'C:/‘之类的而是’CBD:/'就不行。</span><span style="font-size: 11pt; color: #ff0000; font-family: Georgia;">不知道这个起什么作用</span><span style="font-size: 11pt; font-family: Georgia;">？</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 12px; color: #333333; border-radius: 4px; background-color: #fbfaf8; border: 1px solid rgba(0, 0, 0, 0.15); -en-codeblock: true;"><div><span style="font-size: 11pt; font-family: Georgia;"># 比如print(__file__)值为<span style="color: #333333;">E:/code/Python/test/MyTest/otherTest.py</span></span></div><div><span style="font-size: 11pt; font-family: Georgia;">print(os.path.abspath(__file__))     # <span style="color: #333333;">E:\code\Python\test\MyTest\otherTest.py 这个有什么意义？</span></span></div><div><span style="color: #333333;"><span style="font-size: 11pt; font-family: Georgia;">print(os.path.abspath('D:\\a\\b'))     # <span style="color: #333333;">D:\a\b</span> </span></span></div></div><div><span style="font-size: 11pt; font-family: Georgia;">os.path.split(path)：将一个路径分解为两部分，一部分是目录，另一部分是最后的文件名，返回一个元组</span></div><div><span style="font-size: 11pt; font-family: Georgia;">os.path.splitext(path)：把path分解为前面的部分文件后缀，返回的是一个元组，如果没有后缀，元组第二个元素为空</span></div><div><span style="font-size: 11pt; font-family: Georgia;">os.path.splitdrive(path):把path中的驱动器和路径分割开，以元组的形式返回，如果没有驱动器，第一个元组元素为空</span></div><div style="box-sizing: border-box; padding: 8px; border-radius: 4px; background-color: #fbfaf8; border: 1px solid rgba(0, 0, 0, 0.15);"><div><span style="background-color: #fbfaf8;"><span style="font-size: 11pt; background-color: #fbfaf8; color: #333333; font-family: Georgia;">os.path.</span></span></div></div><div><span style="font-size: 11pt; font-family: Georgia;">os.path.getatime(path): 返回最后一次访问path的时间</span></div><div><span style="font-size: 11pt; font-family: Georgia;">os.path.getmtime(path): 返回最后一次修改path的时间</span></div><div><span style="font-size: 14.6667px; font-family: Georgia;">os.path.getctime(path): 这个方法在unix和Windows下不一样，在Windows下是创建的时间。以上三个方法返回的都是数字，</span><span style="font-size: 14.6667px; color: #ff0000; font-family: Georgia;">怎么转成时间？</span><span style="font-size: 14.6667px; font-family: Georgia;">？</span></div><div><span style="font-size: 14.6667px; font-family: Georgia;">os.path.getsize(path): 返回用bytes表示的path大小</span></div><div><span style="font-size: 14.6667px; font-family: Georgia;">os.path.isabs(path): 如果是绝对路径返回True，否则返回False</span></div><div><span style="font-size: 14.6667px; font-family: Georgia;">os.path.isfile(path): 如果path是常规文件(regular file)返回True，否则返回False；</span></div><ul><li><div><span style="font-size: 14.6667px; font-family: Georgia;">问题：哪些是常规文件？</span></div></li><li><div><span style="font-size: 14.6667px; font-family: Georgia;">经测试，exe和dll都返回True</span></div></li></ul><div><span style="font-size: 14.6667px; font-family: Georgia;">os.path.isdir(path):如果path指定的目录存在返回True，否则返回False</span></div><div><span style="font-size: 14.6667px; font-family: Georgia;">os.path.islink(path):</span></div><div><span style="font-size: 14.6667px; font-family: Georgia;">os.path.normcase(path):在windows下把路径中的‘/’转为‘\\’, 其他没什么作用</span></div><div><span style="font-size: 11pt; font-family: Georgia;">os.unlink和os.remove都可以删除文件，有什么区别？</span></div><div><br clear="none"/></div><div><span style="font-size: 11pt; font-family: Georgia;">__file__：当前执行脚本的绝对路径</span></div><div><br clear="none"/></div><div><br clear="none"/></div><div><br clear="none"/></div></div><div><br clear="none"/></div></span>
</div></body></html> 