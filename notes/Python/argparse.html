<html>
<head>
  <title>argparse</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/604043 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="549"/>
<h1>argparse</h1>

<div>
<span><div><div><div><span style="font-family: Georgia;">首先，使用ArgumentParser创建一个对象，然后使用这个对象的add_argument添加参数，一个add_argument是一组参数</span></div><div><br clear="none"/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: georgia, palatina, serif;">parser=argparse.ArgumentParser()</span></div><div><span style="font-family: georgia, palatina, serif;">parser.add_argument('foo')</span></div><div><span style="font-family: georgia, palatina, serif;">parser.add_argument('-p', '--pat')</span></div></div><div><br clear="none"/></div><div>1. class ArgumentParse(...):</div><ul><li><div>参数：</div></li><ul><li><div>prog：在help信息中显示的脚本名</div></li><li><div>usage：</div></li></ul></ul><div>2. add_argument(...):</div><ul><li><div>参数：</div></li><ul><li><div>name or flags：如果有前缀'-'或‘--’，表示是可选参数，没有前缀则为必须参数</div></li><li><div>action:指定该如何处理命令行参数，如果这个关键字参数没有被提供，参数个数由action决定，有以下值：</div></li><ul><li><div>'store’：默认值，仅保存参数值</div></li><li><div>'store_const'：保存由const关键字指定的值，是可选参数最常用的</div></li><li><div>‘store_true’/'store_false':与store_const一样，但只保存True或False值</div></li><li><div>‘append’：保存一个列表，将每个参数值添加到列表中</div></li><li><div>‘append_const’:</div></li><li><div>count：关键字出现的次数</div></li><li><div>nargs: 可以指定多个参数</div></li><ul><li><div>N（一个整数）：收集n个参数放进list中</div></li><li><div>‘?’</div></li><li><div>'*': 所有的命令行参数都会被收集到列表中</div></li><li><div>‘+’</div></li><li><div>argparse.READINDER:</div></li></ul><li><div>‘help’：</div></li><li><div>‘version'</div></li></ul><li><div>const:这个参数用来保存常量，不是来自命令行，而是来自以下：</div></li><ul><li><div>当add_argument调用action=‘store_const'或‘append_const’</div></li><li><div>当add_argument用可选字符串如'-f'和nargs=‘？’调用时</div></li></ul><li><div>default：所有的可选参数和部分位置参数的值有可能被省略，default用来提供这个默认值</div></li><li><div>types：默认情况下命令行参数为string，这个参数指定类型；内建类型和内建函数可以直接作为这个参数的值</div></li><ul><li><div>为了方便使用各种类型的文件，提供了工厂函数FileType</div></li></ul><li><div>choices:一些命令行参数需要在给定的参数范围内取值，choice应该是个集合；choices中的值要符合type指定的类型</div></li><li><div>required：一般可选参数(带前缀'-'/'--')可以被忽略，如果必须要出现，这个参数赋值True</div></li><li><div>help：</div></li></ul></ul><div>3. parse_args(args=None, namespace=None)方法：将字符串参数转换为对象，指定namespace的属性</div><ul><li><div> 参数：</div></li><ul><li><div>args：要解析的字符串列表</div></li></ul><li><div>返回值：namespace对象</div></li></ul><div><br clear="none"/></div><div>4.class argparse.Namespace</div><div><br clear="none"/></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-family: Georgia; font-weight: bold;">2. add_argument()方法</span></span></div><div><span style="font-family: Georgia;">参数组：</span></div><ul><li><div><span style="font-family: Georgia;">name/flags:</span></div></li><ul><li><div><span style="font-family: georgia, palatina, serif;">name(没有&quot;-&quot;前缀）：如上，foo，</span></div></li><li><div><span style="color: rgb(255, 0, 0); font-family: Georgia;">只能有一个——好像不止一个也是可以的</span></div></li><li><div><span style="font-family: Georgia;">在命令行不能指定foo然后跟参数，前面没有任何指定的默认就是这个值</span></div></li></ul><li><div><span style="font-family: Georgia;">用ArgumentParser()对象的实例parser调用parse_args解析完之后就可以用其返回的对象可以访问了</span></div></li><li><div><span style="font-family: Georgia;">如果有name，就不能使用&quot;dest&quot;,目前发现是这样</span></div></li><li><div><span style="font-family: Georgia;">flags(前面要有“-”或“--”)</span></div></li><li><div><span style="font-family: Georgia;">可以有多个</span></div></li><li><div><span style="font-family: Georgia;">带参数前必须先要带上这个标志，中间可以空格或者&quot;=&quot;,当指定多个时只要有一个在命令行指定就可以，其他的可以不用带</span></div></li><li><div><span style="color: rgb(255, 0, 0); font-family: Georgia;">怎么访问这个值</span><span style="font-family: Georgia;">？</span></div></li><li><div><span style="font-family: Georgia;">action:目前发现只针对flags有效，且设置了action之后就不能用name了</span></div></li><li><div><span style="font-family: Georgia;">store：默认值，只取最后一个name/flags的值</span></div></li><li><div><span style="font-family: Georgia;">store_const：感觉没什么应用场景</span></div></li><li><div><span style="font-family: Georgia;">有这个值就要加上const字段指定值，命令行加上flags解析后的值就是const指定的值</span></div></li><li><div><span style="font-family: Georgia;">必须要在命令行指定一个或多个flags，具体几个并没什么区别，但不能指定值</span></div></li><li><div><span style="font-family: Georgia;">store_true/store_False：默认值为True/False，如果指定flags(一个或多个)则为指定的True或False,如果没有在命令行加则取相反,注意：这个取值不似乎让你在命令行写上True或False，而是，命令行加上这个flags就是指定的值，否则就是取反</span></div></li><li><div><span style="font-family: Georgia;">append：把flags中在命令行的值都添加到一个列表，指定几个加几个</span></div></li><li><div><span style="font-family: Georgia;">append_const：保存一个列表，需要加上const字段；</span><span style="color: rgb(255, 0, 0); font-family: Georgia;">发现只要有const的都不能指定参数，那这个有什么用？</span></div></li><li><div><span style="font-family: Georgia;">count：输出在命令行列出的flags个数，注意flags后面不能跟参数；这个估计只统计带了几个flags，其他有什么用？</span></div></li><li><div><span style="font-family: Georgia;">help：</span></div></li><li><div><span style="font-family: Georgia;">version：</span></div></li><li><div><span style="font-family: Georgia;">nargs：指定name/flags后面跟的参数个数</span></div></li><li><div><span style="font-family: Georgia;">N：整数N个</span></div></li><li><div><span style="font-family: Georgia;">?: 表示这个flags后面可以跟0ge或一个参数</span></div></li><li><div><span style="font-family: Georgia;">*: 表示这个flags后面可以跟0个或多个</span></div></li><li><div><span style="font-family: Georgia;">+: 表示这个flags后面可以跟一个或多个参数，最少一个</span></div></li><li><div><span style="font-family: Georgia;">REMAINDER：这个用法不清楚</span></div></li><li><div><span style="font-family: Georgia;">注：如果nargs不提供怎么办？手册有解释</span></div></li><li><div><span style="font-family: Georgia;">const：明确说明不是从命令行读取而是根据不同的action的值给出的常量值，有两种使用场景：</span></div></li><li><div><span style="font-family: Georgia;">如果action值为store_const或append_const，就取const指定的值；这时const必须给出</span></div></li><li><div><span style="font-family: Georgia;">如果调用了flags（-f或--foo），其中nargs为&quot;?&quot;,如果参数为空，就选用const值；const是可选的，如果没有提供const默认wei&quot;None&quot;</span></div></li><li><div><span style="font-family: Georgia;">default: 如果不调用flags，默认值为None，指定了default，则默认值为default的值</span></div></li><li><div><span style="font-family: Georgia;">与type配合使用，没发现有什么东西</span></div></li><li><div><span style="font-family: Georgia;">与nargs配合使用，如果nargs的参数为？或*，如果不加参数时为default指定的值，注意与const的区别是，const指定了flags后面没有参数值，default是连falgs不带就取默认值</span></div></li><li><div><span style="font-family: Georgia;">SUPPRESS:</span></div></li><li><div><span style="font-family: Georgia;">type：</span></div></li><li><div><br clear="none"/></div></li><li><div><span style="font-family: Georgia;">值可以为一个带一个字符串参数的可调用对象，在命令行指定值之后会先调用这个可调用对象处理，返回值为最终传入的值</span></div></li><li><div><span style="font-family: Georgia;">配合choices使用，choices会指定一个取值范围</span></div></li><li><div><span style="font-family: Georgia;">choices:</span></div></li><li><div><span style="font-family: Georgia;">给定一个取值的范围，是一个列表</span></div></li><li><div><span style="font-family: Georgia;">与type配合使用时要注意：经过type的转换之后再进行choices的工作</span></div></li><li><div><span style="font-family: Georgia;">required：命令行中的flags如-f，--foo经常会被忽略，为了不被忽略掉，可以使用required指定为True</span></div></li><li><div><span style="font-family: Georgia;">help：是一个字符串，展示了一段简短的描述，通常使用-h/--help</span></div></li><li><div><span style="font-family: Georgia;">help字符串也可以格式化，prog字段和add_argument的参数中的关键字都可以按如下进行格式化：%(prog)s, %(default)s, %(type)s等，所以如果想在help的字符串中显示%就要为%%</span></div></li><li><div><span style="font-family: Georgia;">metavar：</span></div></li><li><div><span style="font-family: Georgia;">dest：这个参数给每个add_argument加一个名称</span></div></li><li><div><span style="font-family: Georgia;">对于位置参数name，name就是dest，如果再加dest然后用dest指定的去访问就会报错</span></div></li><li><div><span style="font-family: Georgia;">对于flags没有用dest的，第一个最长的字符串去掉前缀(-/--)就是其dest名称</span></div></li><li><div><span style="font-family: Georgia;">如果没有长字符串提供，就取第一个并去掉前缀-/--就是dest名</span></div></li><li><div><span style="font-family: Georgia;">任何内部的中线-会被转成下划线</span></div></li><li><div><span style="font-family: Georgia;">指定dest的名称</span></div></li></ul><div><span style="font-size: 12pt; font-family: georgia, palatina, serif;"><span style="font-size: 12pt; font-family: georgia, palatina, serif; font-weight: bold;">3.parse_args(</span> <span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 12pt; font-family: georgia, palatina, serif; color: rgb(34, 34, 34); font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">args=None</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 12pt; font-family: georgia, palatina, serif; color: rgb(34, 34, 34); font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">,</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 12pt; font-family: georgia, palatina, serif; color: rgb(34, 34, 34); font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;"> </span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12pt; font-family: georgia, palatina, serif; color: rgb(34, 34, 34); font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">namespace=None</span><span style="font-size: 12pt; font-family: georgia, palatina, serif; font-weight: bold;">)方法</span></span>：<span style="font-family: georgia, palatina, serif;">将参数转换为对象, 并指定命名空间的属性</span></div></div><div><span style="font-family: georgia, palatina, serif;">    参数：</span></div><ul><li><div><span style="font-family: georgia, palatina, serif;">args：要解析的一组字符串组成的列表，默认值是sys.argv</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">namespace：带属性的一个对象，默认值是一个新的空的Namespace对象</span></div></li></ul><div><br clear="none"/></div><div><br clear="none"/></div></div><div><br clear="none"/></div></span>
</div></body></html> 