<html>
<head>
  <title>logging/logging.handlers</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/604043 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="757"/>
<h1>logging/logging.handlers</h1>

<div>
<span><div><div><span style="font-family: georgia, palatina, serif;">这个模块可以有两种用法：</span></div><div><span style="font-family: georgia, palatina, serif;">首先，必须要使用模块级函数getLogger获取<strong>Logger</strong>对象的实例，<span style="font-family: georgia, palatina, serif;">必须要设置handler，可以使用全局的basicConfig，也可以使用Handler模块，如下：</span></span></div><div><span style="font-family: georgia, palatina, serif;">1. 使用模块级方法：</span></div><div><span style="font-family: georgia, palatina, serif;">2. 使用模块中独有的类：</span></div><ul><li><div><span style="font-family: georgia, palatina, serif;">初始化Handler对象，并把Formatter等对象的实例设置进去</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">调用Logger对象实例方法addHandler把Handler对象添加进去，如有必要再添加其他的信息</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">调用打印</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">一般步骤：</span></div></li></ul><ol><li><div><span style="font-family: georgia, palatina, serif;">logger = logging.getLogger('xx')：</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">设置日志格式：formatter = logging.Formatter('...')</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">设定输出方式，获取日志句柄如：file_handler = logging.FileHandler('日志文件名')</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">给这个日志句柄设定格式：file_handler.setFormatter(formatter)</span></div></li></ol><ul><li><div><span style="font-family: georgia, palatina, serif;">添加句柄：logger.addHandler（file_handler）</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">设置日志输出等级：logger.setLevel(logging.WARNNING)</span></div></li></ul><div><span style="font-family: georgia, palatina, serif;">模块级函数：</span></div><ul><li><div><span style="font-family: georgia, palatina, serif;">getLogger(name=None): 返回一个name指定的日志，如果name为None，返回根日志。这是最基本的入口，该方法参数可以为空，默认的logger名称是root，如果在同一个程序中一直都使用同名的logger，其实会拿到同一个实例，使用这个技巧就可以跨模块调用同样的logger来记录日志。默认log级别为WARNING，另外你也可以通过日志名称来区分同一程序的不同模块，比如这个例子。</span></div><div><span style="font-family: georgia, palatina, serif;">logger = logging.getLogger(&quot;App.UI&quot;)</span></div><div><span style="font-family: georgia, palatina, serif;">logger = logging.getLogger(&quot;App.Service&quot;)</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">getLoggerClass</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">getLoggerRecordFactory():</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">basicConfig(**kwargs): 创建一个</span><span style="font-family: georgia, palatina, serif; color: #ff00ff;">StreamHandler</span><span style="font-family: georgia, palatina, serif;">，使用默认的Formatter，并将其添加到root logger；如果root logger中没有handler，debug，info,warning等方法会自动去调用这个方法设置的东西。如果root logger已经有了handler不做任何事。basicConfig()提供了非常便捷的方式让你配置logging模块并马上开始使用。至此以下关键字：shutdown：通知日志系统flushing和关闭所有handlers</span></div></li></ul><ul><li><div><span style="font-family: georgia, palatina, serif;">filename：如果给出了这个参数，FileHandler会被创建而不是StreamHandler</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">filemode：如果filename有了，表示打开文件的方式，不指定默认为'a'</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">format: 为handler指定格式化字符串</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">datefmt：使用指定的data/time格式</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">style：</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">level：指定root logger的level</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">stream：使用指定的stream初始化StreamHandler，注意这个参数和第一个参数filename不能同时存在，否则会抛出ValueError的异常</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">handlers：</span></div></li></ul><div><span style="font-family: georgia, palatina, serif;">模块级属性：</span></div><ul><li><div><span style="font-family: georgia, palatina, serif;">lastResort：</span></div></li></ul><div><div><span style="font-family: georgia, palatina, serif;">日志等级：可以设置不同的日志等级，用于控制日志的输出，默认为WARNING,logging模块只会输出指定level以上的log。这样的好处, 就是在项目开发时debug用的log，在产品release阶段不用一一注释，只需要调整logger的级别就可以了</span></div><div><span style="font-family: georgia, palatina, serif;">等级：</span></div><div><ul><li><div><span style="font-family: georgia, palatina, serif;">CRITICAL/FATAL：50，特别糟糕的事情，如内存耗尽、磁盘空间为空，一般很少使用</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">ERROR：40，发生错误时，如IO操作失败或者连接问题</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">WARNING：30，发生很重要的事件，但是并不是错误时，如用户登录密码错误</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">INFO：20，处理请求或者状态变化等日常事务</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">DEBUG：10，调试过程中使用DEBUG等级，如算法中每个循环的中间状态</span></div></li></ul></div><div><div><span style="font-family: georgia, palatina, serif;">NOTSET:0</span></div></div><span style="font-family: georgia, palatina, serif;"><br clear="none"/></span></div><div><span style="font-family: georgia, palatina, serif;">1.<strong>Logger</strong>对象：不能直接实例化，只能通过Logger.getLogger(name)获取，多次使用相同的name调用getLogger会获得同一个Logger对象的引用</span></div><ul><li><div><span style="font-family: georgia, palatina, serif;">propagate：</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">setLevel(lvl)：设置日志级别，低于这个值的日志会被忽略；手册上解释当一个logger创建的时候level会被设置为NOTSET，这时候会引起root logger处理日志信息，root logger的默认值为WARNING，也就是说，低于WARNING的信息会被忽略；</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">isEnableFor(lvl)：严重级别为lvl的会被处理</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">getEffectiveLevel：表示日志的有效级别；如果使用setLevel设置的不是NOTSET就会返回这个级别</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">getChild：</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">debug（</span> <span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal;">msg</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">,</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal;">*args</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">,</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: georgia, palatina, serif; color: #222222; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal;">**kwargs</span><span style="font-family: georgia, palatina, serif;">）：用DEBUG级别记录一条日志</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">info（</span> <span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal;">msg</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">,</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal;">*args</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">,</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: georgia, palatina, serif; color: #222222; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal;">**kwargs</span><span style="font-family: georgia, palatina, serif;">）：用INFO级别记录一条日志</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">warning（</span> <span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal;">msg</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">,</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal;">*args</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">,</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: georgia, palatina, serif; color: #222222; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal;">**kwargs</span><span style="font-family: georgia, palatina, serif;">）：WARNING级别</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">error（</span> <span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal;">msg</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">,</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal;">*args</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">,</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: georgia, palatina, serif; color: #222222; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal;">**kwargs</span><span style="font-family: georgia, palatina, serif;">）：ERROR级别</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">critical（</span> <span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal;">msg</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">,</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal;">*args</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">,</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: georgia, palatina, serif; color: #222222; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal;">**kwargs</span><span style="font-family: georgia, palatina, serif;">）：CRITICAL级别</span></div></li><li><div><span style="font-size: 10pt;"><span style="border-radius: 3px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 10pt; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">log</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">(</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: georgia, palatina, serif; color: #222222; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal;">lvl</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">,</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: georgia, palatina, serif; color: #222222; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal;">msg</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">,</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: georgia, palatina, serif; color: #222222; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal;">*args</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">,</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: georgia, palatina, serif; color: #222222; font-style: italic; font-variant-caps: normal; font-variant-ligatures: normal;">**kwargs</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 10pt; font-family: georgia, palatina, serif; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">)：</span></span><span style="font-size: 14px;"><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: georgia, palatina, serif; font-size: 14px; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">用lvl级别指定输出日志，其他参数同debug</span></span></div></li><li><div><span style="color: #222222; font-family: georgia, palatina, serif;">exception：用ERROR级别记录日志，参数同debug，这个方法只能被exception handler调用</span></div></li></ul><div><span style="color: #222222; font-family: Georgia;">    过滤器：</span></div><ul><li><div><span style="color: #222222; font-family: Georgia;">addFilter(filter)：给日志添加一个指定的过滤器</span></div></li><li><div><span style="color: #222222; font-family: Georgia;">removeFilter(filter): 删除logger的过滤器</span></div></li><li><div><span style="color: #222222; font-family: Georgia;">filter(record):</span></div></li></ul><div><span style="color: #222222; font-family: Georgia;">    句柄相关：</span></div><ul><li><div><span style="color: #222222; font-family: Georgia;">addHandler(hdlr)：给logger添加指定的句柄hdlr</span></div></li><li><div><span style="color: #222222; font-family: Georgia;">removeHandler(hdlr): 给logger删除指定的句柄hdlr</span></div></li><li><div><span style="color: #222222; font-family: Georgia;">findCaller(stack_info=False): 查询调用者的原文件名，行号，函数名，stack信息，作为一个四个元素的元组返回；其中，如果stack_info不是True, stack信息为None</span></div></li><li><div><span style="color: #222222; font-family: Georgia;">handler(record): </span></div></li><li><div><span style="color: #222222; font-family: Georgia;">makeRecord(...): </span></div></li><li><div><span style="color: #222222; font-family: Georgia;">hasHandlers(): </span></div></li></ul><div><span style="color: #222222; font-family: Georgia;">2.Handler对象：不能直接实例化，如果想继承，必须要调用Handler.__init__()方法；后面说到的</span><span style="color: #ff00ff; font-family: Georgia;">StreamHandler, FileHandler等都是继承</span><span style="color: #222222; font-family: Georgia;">自该类</span></div><ul><li><div><span style="color: #222222; font-family: Georgia;">__init__(level=NOTSET):</span></div></li><li><div><span style="color: #222222; font-family: Georgia;"> createLock(): 初始化一个线程锁</span></div></li><li><div><span style="color: #222222; font-family: Georgia;">acquire()：获取这个线程锁</span></div></li><li><div><span style="color: #222222; font-family: Georgia;">release(): 释放线程锁</span></div></li><li><div><span style="color: #222222; font-family: Georgia;">setLevel(level): 设置handler的级别为level，如果低于这个level会被忽略；当一个handler创建的时候level为NOTSET</span></div></li><li><div><span style="color: #222222; font-family: Georgia;">setFormatter(fmt): 设置handler的格式为fmt</span></div></li><li><div><span style="color: #222222; font-family: Georgia;">addFilter</span></div></li><li><div><span style="color: #222222; font-family: Georgia;">removeFilter</span></div></li><li><div><span style="color: #222222; font-family: Georgia;">filter</span></div></li><li><div><span style="color: #222222; font-family: Georgia;">flush():</span></div></li><li><div><span style="color: #222222; font-family: Georgia;">close():</span></div></li><li><div><span style="color: #222222; font-family: Georgia;">handle(record):</span></div></li><li><div><span style="color: #222222; font-family: Georgia;">handleError(record):</span></div></li><li><div><span style="color: #222222; font-family: Georgia;">format(record):</span></div></li><li><div><span style="color: #222222; font-family: Georgia;">emit(record):</span></div></li></ul><div><span style="font-family: georgia, palatina, serif;">3.Formatter对象：实例化一个对象，有哪些名字？如指定输出格式：</span></div><div><span style="font-family: georgia, palatina, serif;">     formatter = logging.Formatter('%(asctime)s %(levelname)-8s: %(message)s')</span></div><div><div><span style="font-family: georgia, palatina, serif;"><span>    </span>Formatter对象定义了log信息的结构和内容，构造时需要带两个参数：</span></div><ul><li><div><span style="font-family: georgia, palatina, serif;">一个是格式化的模板fmt，默认会包含最基本的level和 message信息</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">一个是格式化的时间样式datefmt，默认为 2003-07-08 16:49:45,896 (%Y-%m-%d %H:%M:%S)</span></div></li></ul><div><span style="font-family: georgia, palatina, serif;">     fmt中允许使用的变量可以参考下表:</span></div><ul><li><div><span style="font-family: georgia, palatina, serif;">%(name)s Logger的名字</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">%(levelno)s 数字形式的日志级别</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">%(levelname)s 文本形式的日志级别</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">%(pathname)s 调用日志输出函数的模块的完整路径名，可能没有</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">%(filename)s 调用日志输出函数的模块的文件名</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">%(module)s 调用日志输出函数的模块名|</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">%(funcName)s 调用日志输出函数的函数名|</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">%(lineno)d 调用日志输出函数的语句所在的代码行</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">%(created)f 当前时间，用UNIX标准的表示时间的浮点数表示|</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">%(relativeCreated)d 输出日志信息时的，自Logger创建以来的毫秒数|</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">%(asctime)s 字符串形式的当前时间。默认格式是“2003-07-08 16:49:45,896”。逗号后面的是毫秒</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">%(thread)d 线程ID。可能没有</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">%(threadName)s 线程名。可能没有</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">%(process)d 进程ID。可能没有</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">%(message)s 用户输出的消息</span></div></li></ul></div><div><span style="font-family: georgia, palatina, serif;">4.Filter对象：限制只有满足过滤规则的日志才会输出。</span></div><div><span style="font-family: georgia, palatina, serif;">     比如我们定义了filter = logging.Filter('a.b.c'),并将这个Filter添加到了一个Handler上，则使用该Handler的Logger中只有名字带a.b.c前缀的         Logger才能输出其日志。</span></div><div><span style="font-family: georgia, palatina, serif;">5.LogRecord对象：实例会自动被创建，也可以通过makeLogRecord()手动创建</span></div><div>     <span style="font-size: 10pt;"><span style="border-radius: 3px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">logging.</span><span style="background-color: #ffffff; border-radius: 3px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">LogRecord</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">(</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">name</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">,</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">level</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">,</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">pathname</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">,</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">lineno</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">,</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">msg</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">,</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">args</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">,</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">exc_info</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">,</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">func=None</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">,</span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 10pt; font-family: Georgia; color: #222222; font-variant-caps: normal; font-variant-ligatures: normal;">sinfo=None):包含了所有的信息</span></span></div><ul><li><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 10pt; color: #222222; font-family: Georgia; font-variant-caps: normal; font-variant-ligatures: normal;">getMessage():</span></span></div></li><li><div><span style="font-size: 10pt; color: #222222; font-family: Georgia;">LogRecord属性：</span></div></li></ul><div><span style="color: #222222; font-family: Georgia;">6.LoggerAdapter对象</span></div><div><br clear="none"/></div><div><span style="font-size: 18px; font-family: georgia, palatina, serif; font-weight: bold;">logging.handlers</span></div><div><span style="font-size: 14px; font-family: georgia, palatina, serif;">StreamHandler, FileHandler, NullHandler定义在logging中，鉴于都是handler就放在一起了</span></div><div><br clear="none"/></div><div><span style="font-family: georgia, palatina, serif;">1.logging.StreamHandler(stream=None): 可以输出到sys.stdout, sys.stderr或者文件对象中等。返回类StreamHandler的一个实例，如果参数stream没有指定，将会使用sys.stderr</span></div><ul><li><div><span style="font-family: georgia, palatina, serif;">emit(record): </span></div></li></ul><div><span style="font-family: georgia, palatina, serif;">2.FileHandler(filename, mode='a', encoding=None, delay=False), 返回一个FileHandler类的对象，将日志输出到磁盘文件中</span></div><div><span style="font-family: georgia, palatina, serif;">    参数：</span></div><ul><li><div><span style="font-family: georgia, palatina, serif;">delay：如果为True，文件的打开会一直到第一次调用emit的时候</span></div></li></ul><div><span style="font-family: georgia, palatina, serif;">    方法：</span></div><ul><li><div><span style="font-family: georgia, palatina, serif;">close(): 关闭文件</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">emit(record): 将record输出到文件中</span></div></li></ul><div><span style="font-family: georgia, palatina, serif;">3. NullHandler：目前不知道用法</span></div><div><br clear="none"/></div><div><br clear="none"/></div><div><div><h4><span style="font-family: georgia, palatina, serif;">Configuration 配置方法</span></h4><div style="margin-top: 1em; margin-bottom: 1em; -en-paragraph: true;"><span style="font-family: georgia, palatina, serif;">logging的配置大致有下面几种方式。</span></div><ol><li><div><span style="font-family: georgia, palatina, serif;">通过代码进行完整配置，参考开头的例子，主要是通过getLogger方法实现。</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">通过代码进行简单配置，下面有例子，主要是通过basicConfig方法实现。</span></div></li><li><div><span style="font-family: georgia, palatina, serif;">通过配置文件，下面有例子，主要是通过 logging.config.fileConfig(filepath)</span></div></li></ol><h5><br clear="none"/></h5></div></div></div><div><br clear="none"/></div></span>
</div></body></html> 